<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.itda.ITDA.mybatis.mapper.ReplyMapper">


	<select id="getReplies" resultType="BoardReply">
		SELECT
			replynum, boardnum,
			replywriter,
			replycontent, replyref, replylev,
			replyseq, replydate
		FROM
			boardreply
		WHERE boardnum = #{boardNum}
		ORDER BY replyDate ${sort},
		replySeq ASC
	</select>


	<insert id="addReply">
		INSERT INTO BoardReply
		(REPLYNUM, BOARDNUM,
		REPLYWRITER, REPLYCONTENT,
		REPLYREF, REPLYLEV, REPLYSEQ,
		REPLYDATE,
		REPLYUPDATE)
		VALUES
		(re_seq.nextval, #{boardNum}, #{replyWriter},
		#{replyContent},
		#{replyRef},
		#{replyLev}, #{replySeq} , SYSDATE ,
		NULL)
	</insert>

	<insert id="commentsInsert">
		INSERT INTO BoardReply
		(REPLYNUM, BOARDNUM,
		REPLYWRITER, REPLYCONTENT,
		REPLYREF, REPLYLEV, REPLYSEQ, REPLYDATE,
		REPLYUPDATE)
		VALUES
		(re_seq.nextval, #{boardNum}, #{replyWriter},
		#{replyContent},
		#{replyRef}, #{replyLev}, #{replySeq} , SYSDATE ,
		NULL)
	</insert>

	<update id="commentsUpdate">
		update BoardReply
		set replyContent = #{replyContent}
		where
		REPLYNUM = #{replyNum}
	</update>

	<delete id="commentsDelete">
		delete BoardReply
		where REPLYNUM = ${replyNum}
	</delete>
	
	<select id="getListCount" resultType="int">
	  SELECT COUNT(*)
	  FROM boardreply
	  WHERE boardNum = #{boardNum}
	</select>


</mapper>